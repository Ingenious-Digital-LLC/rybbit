"use strict";(()=>{(function(){let e="[rybbit-ad]",o="d38451f43f87",r=document.currentScript;if(!r){console.warn(e,"Could not find script tag");return}let s=(r.getAttribute("src")||"").split("/ad.js")[0].replace("/api",""),l=s+"/api/track";console.log(e,"Initialized",{siteId:o,analyticsHost:s}),document.addEventListener("click",function(d){let n=d.target.closest("a");if(!n)return;let a=n.querySelector("img");if(!a)return;let c=a.src;if(!c)return;console.log(e,"Ad click detected",{imgSrc:c,href:n.href});let i={type:"ad_click",site_id:o,pathname:c,hostname:window.location.hostname,screenWidth:window.screen.width,screenHeight:window.screen.height,language:navigator.language,page_title:document.title,referrer:document.referrer};console.log(e,"Sending payload",i),fetch(l,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i),keepalive:!0}).then(t=>t.ok?console.log(e,"Tracked OK",t.status):t.text().then(g=>console.error(e,"Track failed",t.status,g))).catch(t=>console.error(e,"fetch error:",t))})})();})();
